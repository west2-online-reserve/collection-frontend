<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>海绵宝宝抓章鱼</title>
</head>
<style>
    * {
        font-size: 30px;
    }
</style>
<body>
<p>
    海绵宝宝很爱抓章鱼，可爱的学长（出题人）把章鱼哥也混在里面了，尽管他也是章鱼，但是不能抓到他。
</p>
<p>
    现在我们要将章鱼哥先从这些章鱼中分离出来（即把这个节点从
    <code>&lt;ul&gt;</code> 里面去掉），之后再抓章鱼。
</p>
<p>
    海绵宝宝抓章鱼喜欢先从重量小的开始抓，请帮助可爱的海绵宝宝和可爱的学长
</p>

<ul id="octopus">
    <li>
        <span class="name">章鱼一号</span><span class="weight">30.4kg</span>
    </li>
    <li>
        <span class="name">章鱼二号</span><span class="weight">24.2kg</span>
    </li>
    <li>
        <span class="name">章鱼三号</span><span class="weight">250.3kg</span>
    </li>
    <li>
        <span class="name">章鱼四号</span><span class="weight">300.9kg</span>
    </li>
    <li>
        <span class="name">章鱼五号</span><span class="weight">120.0kg</span>
    </li>
    <li>
        <span class="name">章鱼六号</span><span class="weight">27.5kg</span>
    </li>
    <li>
        <span class="name">章鱼七号</span><span class="weight">35.4kg</span>
    </li>
    <li>
        <span class="name">章鱼哥</span><span class="weight">25.5kg</span>
    </li>
</ul>

<ul id="octopus-sort">
    <!--
      <li>第一只章鱼：章鱼六号：27.5kg</li>
    -->
</ul>

<button id="sort-btn">排序</button>

<!-- 不可以修改上述代码内容，只能在 script 标签内填写代码 -->

<script>
    /** 把章鱼哥节点从 ul 列表中删除 */
    let ul = document.getElementById("octopus");
    function remove() {
        // [请在此处填写代码]
        ul.removeChild(ul.children[ul.children.length - 1]);
    }
    /*
     * 读取 id 为 octopus 的列表，获取其中章鱼名字和体重
     * 返回一个 JSON 数组，格式见函数中示例
     */
    function getWeight() {
        let ul = document.getElementById("octopus");
        let li = ul.getElementsByTagName("li");
        let data=[];
        for (let i = 0; i < li.length; i++) {
            data.push({
                "name":li[i].getElementsByTagName('span')[0].textContent,
                "weight":li[i].getElementsByTagName('span')[1].textContent
            })
        }
        return data;
    }
    /** 按章鱼重量，对 data 进行从小到大的排序，返回排序后的数组 */
    function getSortedOctopus(data) {
        for (let k = 0;k < data.length ; k++) {
            data[k].weight = data[k].weight.replace('kg','');
            data[k].weight = Number(data[k].weight);
        }
        for (let i = 0; i < data.length; i++) {
            for (let j = i; j < data.length; j++) {
                if(data[i].weight>data[j].weight){
                    let temp = data[i];
                    data[i] = data[j];
                    data[j] = temp;
                }
            }
        }
        for (let i = 0; i < data.length; i++) {
            data[i].weight = data[i].weight+'kg';
        }
        return data;
    }
    /** 将排好序的章鱼朋友输出显示到 id 为 octopus-sort 的列表中，格式见 ul 中注释 */
    function changNums(a){
        switch(a){
            case 1:
                return '一';
            case 2:
                return '二';
            case 3:
                return '三';
            case 4:
                return '四';
            case 5:
                return '五';
            case 6:
                return '六';
            case 7:
                return '七';
            case 8:
                return '八';
            case 9:
                return '九';
        }
    }
    function render(data) {
        // [请在此处填写代码]
        ul.innerHTML = '';
        let octopusSort =document.getElementById("octopus-sort");
        octopusSort.innerHTML="";
        for (let i = 0; i < data.length; i++) {
            let li = document.createElement("li");
            li.innerHTML ='第'+changNums(i+1)+'只章鱼: '+data[i].name+':'+data[i].weight;
            octopusSort.appendChild(li);
        }
    }

    // 按钮点击事件处理函数
    function handleButtonClick() {
        // [请在此处填写代码]
        remove();
        let data=getWeight();
        data=getSortedOctopus(data);
        render(data);
    }
    let sortButton = document.getElementById("sort-btn");
    sortButton.addEventListener("click", handleButtonClick);
    // 给 sort-btn 绑定一个点击事件，点击时触发 handleButton 函数
    // 触发后在浏览器上可以看到结果
    // [请在此处填写代码]
</script>
</body>
</html>
