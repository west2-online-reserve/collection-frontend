<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>海绵宝宝抓章鱼</title>
</head>
<style>
  * {
    font-size: 30px;
  }
</style>

<body>
  <p>
    海绵宝宝很爱抓章鱼，可爱的学长（出题人）把章鱼哥也混在里面了，尽管他也是章鱼，但是不能抓到他。
  </p>
  <p>
    现在我们要将章鱼哥先从这些章鱼中分离出来（即把这个节点从
    <code>&lt;ul&gt;</code> 里面去掉），之后再抓章鱼。
  </p>
  <p>
    海绵宝宝抓章鱼喜欢先从重量小的开始抓，请帮助可爱的海绵宝宝和可爱的学长
  </p>

  <ul id="octopus">
    <li>
      <span class="name">章鱼一号</span><span class="weight">30.4kg</span>
    </li>
    <li>
      <span class="name">章鱼二号</span><span class="weight">24.2kg</span>
    </li>
    <li>
      <span class="name">章鱼三号</span><span class="weight">250.3kg</span>
    </li>
    <li>
      <span class="name">章鱼四号</span><span class="weight">300.9kg</span>
    </li>
    <li>
      <span class="name">章鱼五号</span><span class="weight">120.0kg</span>
    </li>
    <li>
      <span class="name">章鱼六号</span><span class="weight">27.5kg</span>
    </li>
    <li>
      <span class="name">章鱼七号</span><span class="weight">35.4kg</span>
    </li>
    <li>
      <span class="name">章鱼哥</span><span class="weight">25.5kg</span>
    </li>
  </ul>

  <ul id="octopus-sort">
    <!--
        <li>第一只章鱼：章鱼六号：27.5kg</li>
      -->
  </ul>

  <button id="sort-btn">排序</button>

  <!-- 不可以修改上述代码内容，只能在 script 标签内填写代码 -->

  <script>
    /** 把章鱼哥节点从 ul 列表中删除 */
    function remove() {
      const ul = document.getElementById('octopus');
      if (!ul) return;
      const items = ul.querySelectorAll('li');
      for (const li of items) {
        const nameEl = li.querySelector('.name');
        if (nameEl && nameEl.textContent.trim() === '章鱼哥') {
          ul.removeChild(li);
          break; // 只删除第一个匹配的
        }
      }
    }

    /*
     * 读取 id 为 octopus 的列表，获取其中章鱼名字和体重
     * 返回一个 JSON 数组，格式见函数中示例
     */
    function getWeight() {
      const ul = document.getElementById('octopus');
      const data = [];
      if (!ul) return data;
      const items = ul.querySelectorAll('li');
      items.forEach(li => {
        const nameEl = li.querySelector('.name');
        const weightEl = li.querySelector('.weight');
        if (!nameEl || !weightEl) return;
        const name = nameEl.textContent.trim();
        const weightText = weightEl.textContent.trim(); // 如 "27.5kg"
        // 提取数字部分并转换为浮点数
        const weight = parseFloat(weightText.replace(/[^0-9\.\-]/g, ''));
        if (!Number.isNaN(weight)) {
          data.push({ name, weight });
        }
      });
      return data;
    }

    /** 按章鱼重量，对 data 进行从小到大的排序，返回排序后的数组 */
    function getSortedOctopus(data) {
      // 不修改原数组，返回一个副本
      return data.slice().sort((a, b) => a.weight - b.weight);
    }

    /** 将排好序的章鱼朋友输出显示到 id 为 octopus-sort 的列表中，格式见 ul 中注释 */
    function render(data) {
      const ul = document.getElementById('octopus-sort');
      if (!ul) return;
      ul.innerHTML = '';
      data.forEach((item, index) => {
        const li = document.createElement('li');
        // 使用 toFixed(1) 保持和原始数据一致的一位小数显示（例如 120.0kg）
        li.textContent = `第${index + 1}只章鱼：${item.name}：${item.weight.toFixed(1)}kg`;
        ul.appendChild(li);
      });
    }

    // 按钮点击事件处理函数
    function handleButtonClick() {
      // 先把章鱼哥从列表中删除，然后读取权重、排序并渲染
      remove();
      const data = getWeight();
      const sorted = getSortedOctopus(data);
      render(sorted);
    }

    // 给 sort-btn 绑定一个点击事件，点击时触发 handleButton 函数
    // 触发后在浏览器上可以看到结果
    document.getElementById('sort-btn').addEventListener('click', handleButtonClick);
  </script>
</body>

</html>