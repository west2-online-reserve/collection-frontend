<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Document</title>
  <style>
    button {
      text-decoration: none;
      background: #2f435e;
      color: #f2f2f2;

      padding: 10px 30px 10px 30px;
      font-size: 16px;
      font-family: 微软雅黑, 宋体, Arial, Helvetica, Verdana, sans-serif;
      font-weight: bold;
      border-radius: 3px;

      -webkit-transition: all linear 0.3s;
      -moz-transition: all linear 0.3s;
      transition: all linear 0.3s;
    }

    .wra {
      background-color: gray;
      width: 190px;
      text-align: center;
      height: 120px;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
    }

    /* 添加到原有的style部分 */
    button.cheat-button {
      position: fixed;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      padding: 10px 20px;
      background-color: #ff4444;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      z-index: 1000;
      /* 添加动画效果 */
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    button.cheat-button.show {
      opacity: 1;
    }
  </style>
</head>

<body>
  <div id="app">
    <div class="wra">
      <h3>你觉得你点的到我吗</h3>
      <button class="yes">能</button>
      <button class="no">不能</button>
    </div>
  </div>

  <script>
    // 获取元素
    const yesButton = document.querySelector('.yes');
    const noButton = document.querySelector('.no');
    const wra = document.querySelector('.wra');

    // 初始化变量
    let missCount = 0;
    const maxMissCount = 5;
    let isMovingEnabled = true; // 是否允许移动
    let cheatButton = null;     // 作弊按钮引用
    // 创建作弊按钮函数
    function createCheatButton() {
      const button = document.createElement('button');
      button.className = 'cheat-button'; // 使用CSS类名控制样式

      button.textContent = '停止移动 (作弊)';

      button.addEventListener('click', function () {
        isMovingEnabled = false;
        wra.style.transform = 'translate(-50%, -50%)';
        wra.style.left = '50%';
        wra.style.top = '50%';

        button.classList.remove('show');
        setTimeout(() => button.remove(), 300); // 等待动画完成
      });

      document.body.appendChild(button);
      setTimeout(() => button.classList.add('show'), 0);
      return button;
    }
    // 监听全文档点击
    document.addEventListener('click', function (e) {
      // 检查是否点击了按钮（包括子元素）
      const isClickOnButton = e.target.closest('.yes') || e.target.closest('.no');

      if (isClickOnButton) {
        // 点击按钮时重置计数器
        missCount = 0;
        // 如果作弊按钮存在则移除
        if (cheatButton) {
          cheatButton.remove();
          cheatButton = null;
        }
      } else {
        // 未点击按钮时增加计数器
        missCount++;

        // 达到5次未点击时
        if (missCount >= maxMissCount && !cheatButton) {
          // 创建作弊按钮
          cheatButton = createCheatButton();
          // 可以添加提示
          alert('老年人还是试试这个吧');
        }
      }
    });
    // 容器移动逻辑
    wra.addEventListener('mouseenter', function () {
      if (!isMovingEnabled) return;

      const windowWidth = window.innerWidth;
      const windowHeight = window.innerHeight;
      const wraWidth = wra.offsetWidth;
      const wraHeight = wra.offsetHeight;

      const randomX = Math.floor(Math.random() * (windowWidth - wraWidth));
      const randomY = Math.floor(Math.random() * (windowHeight - wraHeight));

      wra.style.left = randomX + 'px';
      wra.style.top = randomY + 'px';
      wra.style.transform = 'none';
    });
    // 保留原有按钮功能
    yesButton.addEventListener('click', function () {
      alert('少侠好身手');
    });
    noButton.addEventListener('click', function () {
      alert('你这不是点到了吗？');
    });
  </script>

</body>

</html>